========================================
  COMO RODAR O PROJETO KAFKA-SPRING
========================================

PRE-REQUISITOS
--------------
1. Java 21 (JDK) instalado
2. Maven instalado (ou usar o wrapper ./mvnw)
3. Docker Desktop instalado e RODANDO

IMPORTANTE: O Docker Desktop precisa estar aberto e com o engine inicializado.
Se voce receber o erro:
   "open //./pipe/dockerDesktopLinuxEngine: The system cannot find the file specified"
Significa que o Docker Desktop NAO esta rodando. Abra o Docker Desktop e aguarde
ate que o icone na bandeja do sistema indique "Docker Desktop is running".


PASSO 1 - Subir a infraestrutura (Docker)
------------------------------------------
Abra um terminal na pasta do projeto e execute:

   docker compose up -d

Isso ira subir os seguintes servicos:
   - Zookeeper        -> porta 2181
   - Kafka            -> porta 9092
   - Kafka UI         -> porta 8090  (interface web para visualizar topicos/mensagens)
   - Prometheus       -> porta 9090  (coleta de metricas)
   - Grafana          -> porta 3000  (dashboards de monitoramento)
   - Loki             -> porta 3100  (coleta de logs)

Para verificar se todos os containers subiram:

   docker compose ps

Para ver os logs de um container especifico:

   docker compose logs -f kafka


PASSO 2 - Compilar o projeto
-----------------------------
Na pasta raiz do projeto, execute:

   .\mvnw.cmd clean package -DskipTests

Ou, se tiver o Maven instalado globalmente:

   mvn clean package -DskipTests


PASSO 3 - Rodar a aplicacao Spring Boot
----------------------------------------
Opcao A - Pelo Maven:

   .\mvnw.cmd spring-boot:run

Opcao B - Pelo JAR gerado:

   java -jar target\kafka-0.0.1-SNAPSHOT.jar

A aplicacao ira subir na porta 8080 (padrao do Spring Boot).


PASSO 4 - Acessar os servicos
------------------------------
Aplicacao (API):      http://localhost:8080
Swagger/OpenAPI:      http://localhost:8080/swagger-ui.html
Kafka UI:             http://localhost:8090
Prometheus:           http://localhost:9090
Grafana:              http://localhost:3000  (usuario: admin / senha: admin)
Actuator:             http://localhost:8080/actuator


PASSO 5 - Parar tudo
---------------------
Para parar a aplicacao Spring Boot:
   Pressione Ctrl+C no terminal onde ela esta rodando.

Para parar a infraestrutura Docker:

   docker compose down

Para parar e remover volumes (limpar dados):

   docker compose down -v


SOLUCAO DE PROBLEMAS
--------------------
1. Erro "dockerDesktopLinuxEngine not found":
   -> Abra o Docker Desktop e aguarde ele inicializar completamente.

2. Kafka nao conecta:
   -> Verifique se o container do Kafka esta rodando: docker compose ps
   -> Verifique os logs: docker compose logs kafka

3. Porta ja em uso:
   -> Verifique qual processo esta usando a porta:
      netstat -aon | findstr :9092
   -> Encerre o processo ou altere a porta no docker-compose.yml

4. Erro ao compilar:
   -> Verifique se o Java 21 esta instalado: java -version
   -> Verifique o JAVA_HOME: echo %JAVA_HOME%
